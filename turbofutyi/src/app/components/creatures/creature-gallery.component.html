<div class="gallery-page">
  <div class="gallery-header">
    <div class="breadcrumb">
      @if (creatureId) {
        <a [routerLink]="['/creatures', creatureId]">‚Üê Vissza a l√©nyhez</a>
      }
    </div>
    <h1>üñºÔ∏è Gal√©ria</h1>
    @if (creatureName()) {
      <p class="subtitle">{{ creatureName() }} k√©pei</p>
    }
  </div>

  @if (errorMessage()) {
    <div class="error-message">
      {{ errorMessage() }}
    </div>
  }

  <div class="upload-section">
    <label for="file-upload" class="upload-button" [class.uploading]="isUploading()">
      @if (isUploading()) {
        <span class="loading-spinner"></span>
        <span>Felt√∂lt√©s...</span>
      } @else {
        <span class="upload-icon">üì§</span>
        <span>K√©p felt√∂lt√©se</span>
      }
    </label>
    <input
      id="file-upload"
      type="file"
      accept="image/*"
      (change)="onFileSelected($event)"
      [disabled]="isUploading()"
      style="display: none"
    />
    <p class="upload-hint">T√°mogatott form√°tumok: JPG, PNG, GIF (max. 5MB)</p>
  </div>

  @if (isLoading()) {
    <div class="loading">
      <div class="spinner"></div>
      <p>K√©pek bet√∂lt√©se...</p>
    </div>
  }

  @if (!isLoading()) {
    @if (gallery().length === 0) {
      <div class="empty-state">
        <div class="empty-icon">üñºÔ∏è</div>
        <h2>M√©g nincsenek k√©pek</h2>
        <p>T√∂ltse fel az els≈ë k√©pet a gal√©ri√°ba!</p>
      </div>
    } @else {
      <div class="gallery-grid">
        @for (image of gallery(); track image.id) {
          <div class="gallery-item" (click)="openImage(image)">
            <img [src]="image.image_url" [alt]="image.image_path" />
            <div class="image-overlay">
              <span class="view-icon">üîç</span>
            </div>
          </div>
        }
      </div>
    }
  }
</div>

@if (selectedImage()) {
  <div class="lightbox" (click)="closeImage()">
    <button class="close-button" (click)="closeImage()">‚úï</button>
    <img [src]="selectedImage().image_url" [alt]="selectedImage().image_path" (click)="$event.stopPropagation()" />
  </div>
}
